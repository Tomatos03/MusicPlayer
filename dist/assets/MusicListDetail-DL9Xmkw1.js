import{r as v}from"./request-qcfbbcHn.js";import{r as h,c as p,b as o,t as r,h as m,F as R,l as S,f as a,g as n,d as T,e as c,a as _,u as z,x as B,i as F}from"./index-Cmw_d75W.js";import{f as N,h as U}from"./utils-B4ujTfZE.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./province-mXtWvQn7.js";const A={key:0,class:"music-detail"},E={class:"musiclist-info"},q=["src"],P={class:"profile"},$={class:"description"},j={style:{color:"#00b2ff"}},G={key:1},H={class:"author-info"},J=["src"],K={style:{color:"#949494"}},O={class:"btns"},Q={__name:"MusicListDetail",setup(W){const b=z(),s=h(null),d=h(null),g=B(),f=F(),D=e=>{const t=new Date(e);return N(t,"yyyy-MM-dd")},w=e=>{f.push({name:"accountDetail",params:{uid:e}})},k=async()=>{const e=await v("/playlist/detail",{id:g.params.id});s.value=e.data.playlist,console.log(s.value)},M=async()=>{const e=await v("/playlist/track/all",{id:g.params.id});d.value=e.data.songs,d.value.forEach((t,l)=>{d.value[l].dt=U(t.dt)})},C=async e=>{console.log(e);try{const t=await v("/song/url",{id:e.id}),l={id:e.id,name:e.name,authors:e.ar,url:t.data.data[0].url,cover:e.al.picUrl};b.dispatch("updateCurrentPlaySong",l)}catch(t){console.error("获取音频 URL 出错:",t)}};return k(),M(),(e,t)=>{const l=c("el-button"),i=c("el-table-column"),x=c("el-table"),y=c("el-tab-pane"),L=c("el-tabs");return s.value?(_(),p("div",A,[o("div",E,[o("img",{src:s.value.coverImgUrl,alt:"",class:"musiclist-img"},null,8,q),o("div",P,[o("h2",null,r(s.value.name),1),o("p",$,r(s.value.description?s.value.description:"暂无简介"),1),o("p",null,[t[1]||(t[1]=m(" 标签: ")),s.value.tags.length>0?(_(!0),p(R,{key:0},S(s.value.tags,u=>(_(),p("span",j,r(u+" "),1))),256)):(_(),p("span",G,"暂无标签"))]),o("div",H,[o("div",{class:"wrapper",onClick:t[0]||(t[0]=u=>w(s.value.creator.userId))},[o("img",{src:s.value.creator.avatarUrl,alt:"avatar",class:"avatar"},null,8,J),o("span",null,r(s.value.creator.nickname),1)]),o("span",K,r(D(s.value.createTime))+" 创建",1)]),o("div",O,[a(l,{color:"#FC3D49",size:"large",type:"primary",icon:"CaretRight"},{default:n(()=>t[2]||(t[2]=[m("播放全部")])),_:1}),a(l,{color:"#D9D9D9",size:"large",type:"primary",icon:"CollectionTag"},{default:n(()=>t[3]||(t[3]=[m("收藏")])),_:1}),a(l,{color:"#D9D9D9",size:"large",type:"primary",icon:"Download"},{default:n(()=>t[4]||(t[4]=[m("下载")])),_:1}),a(l,{color:"#D9D9D9",size:"large",type:"primary",icon:"MoreFilled"})])])]),a(L,{class:"musiclist"},{default:n(()=>[a(y,{label:"歌曲"},{default:n(()=>[a(x,{data:d.value,stripe:"","highlight-current-row":"","row-key":u=>u.id,style:{width:"100%"},onRowDblclick:C},{default:n(()=>[a(i,{type:"index",width:"50",label:"#"}),a(i,{prop:"name",label:"标题","min-width":"230"}),a(i,{prop:"ar[0].name",label:"作者","min-width":"230"}),a(i,{prop:"al.name",label:"专辑","min-width":"230"}),a(i,{prop:"dt",label:"时长","min-width":"200"})]),_:1},8,["data","row-key"])]),_:1}),a(y,{label:"评论"}),a(y,{label:"收藏者"})]),_:1})])):T("",!0)}}},et=V(Q,[["__scopeId","data-v-3db600d0"]]);export{et as default};
